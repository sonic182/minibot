# Runtime mode and verbosity.
[runtime]
# Production note: use "INFO" (or "WARNING") here and set `environment = "production"`.
log_level = "DEBUG"
environment = "development"

# Telegram adapter settings.
[channels.telegram]
enabled = true
bot_token = ""
allowed_chat_ids = []
allowed_user_ids = []
require_authorized = true
mode = "long_polling"
webhook_url = ""
media_enabled = true
# Byte-size values accept raw integers or quoted units (SI preferred), e.g. "5MB", "16KB", "2MiB".
max_photo_bytes = "5MB"
max_document_bytes = "10MB"
max_total_media_bytes = "12MB"
max_attachments_per_message = 3
allowed_document_mime_types = []

# LLM provider and generation settings.
[llm]
provider = "openai_responses"
api_key = ""
base_url = ""
model = "gpt-5-mini"
max_tool_iterations = 15
system_prompt = "You are Minibot, a helpful assistant."

# Optional request params. Omit keys to avoid sending them.
# temperature = 0.2
# max_new_tokens = 512
# reasoning_effort = "medium"

# Optional OpenRouter-specific routing configuration.
# Applied only when `llm.provider = "openrouter"`.
[llm.openrouter]
# Optional model pool for fallback routing.
# models = ["anthropic/claude-3.5-sonnet", "gryphe/mythomax-l2-13b"]
# Optional OpenRouter plugins (for example PDF parsing engine).
# plugins = [{ id = "file-parser", pdf = { engine = "pdf-text" } }]

[llm.openrouter.provider]
# order = ["anthropic", "openai"]
# allow_fallbacks = true
# require_parameters = false
# data_collection = "deny"
# zdr = true
# enforce_distillable_text = false
# only = ["anthropic"]
# ignore = ["parasail"]
# quantizations = ["int8"]
# sort = "price"
# preferred_min_throughput = 20
# preferred_max_latency = 2.0
# max_price = { prompt = 3.0, completion = 15.0 }
# provider_extra = {}

# Conversation memory persistence.
[memory]
backend = "sqlite"
sqlite_url = "sqlite+aiosqlite:///./data/minibot.db"
max_history_messages = 200

# Scheduled prompt storage and polling.
[scheduler.prompts]
enabled = true
sqlite_url = "sqlite+aiosqlite:///./data/scheduled_prompts.db"
# Poll cadence for scanning due jobs.
poll_interval_seconds = 60
# How long a claimed job stays leased before becoming claimable again.
lease_timeout_seconds = 120
# Max due jobs processed per poll cycle.
batch_size = 10
# Max attempts before job is marked failed.
max_attempts = 3
# Minimum allowed interval for recurring jobs (`recurrence_type = "interval"`).
min_recurrence_interval_seconds = 60
pool_size = 5
echo = false

# Optional key/value memory tool.
[tools.kv_memory]
enabled = false
sqlite_url = "sqlite+aiosqlite:///./data/kv_memory.db"
pool_size = 5
echo = false
default_limit = 20
max_limit = 100
default_owner_id = "primary"

# Optional HTTP fetch tool.
[tools.http_client]
enabled = false
timeout_seconds = 10
max_bytes = "16KB"
response_processing_mode = "auto"
max_chars = 6000
normalize_whitespace = true

# Optional browser automation tool (Playwright).
[tools.playwright]
enabled = false
browser = "chromium"
launch_channel = "chrome"
chromium_executable_path = ""
headless = false
user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36"
viewport_width = 1920
viewport_height = 1080
locale = "en-US"
timezone_id = "America/New_York"
permissions = ["geolocation"]
geolocation_latitude = 40.7128
geolocation_longitude = -74.0060
screen_width = 1920
screen_height = 1080
extra_http_headers = { Accept-Language = "en-US,en;q=0.9", Sec-Ch-Ua = '"Chromium";v="124", "Google Chrome";v="124", "Not-A.Brand";v="99"', Sec-Ch-Ua-Mobile = "?0", Sec-Ch-Ua-Platform = '"Windows"' }
navigation_timeout_seconds = 20
action_timeout_seconds = 10
max_text_chars = 6000
# Screenshot output is currently disabled in tool responses.
# Kept here only for forward compatibility; currently not used.
# max_screenshot_bytes = "2MB"
postprocess_outputs = true
postprocess_expose_raw = false
postprocess_snapshot_ttl_seconds = 30
session_ttl_seconds = 600
allowed_domains = []
allow_http = false
block_private_networks = true
launch_args = [
  "--disable-blink-features=AutomationControlled",
  "--disable-dev-shm-usage",
  "--no-sandbox",
  "--disable-extensions",
  "--lang=en-US,en",
  "--disable-notifications",
]

# Managed file workspace tools.
[tools.file_storage]
enabled = false
root_dir = "./data/files"
max_write_bytes = "64KB"
save_incoming_uploads = false
uploads_subdir = "uploads"
incoming_temp_subdir = "uploads/temp"

# Built-in calculator tool.
[tools.calculator]
enabled = true
default_scale = 28
max_expression_length = 200
max_exponent_abs = 1000

# Python code execution tool.
[tools.python_exec]
enabled = true
backend = "host"
python_path = ""
venv_path = ""
sandbox_mode = "basic"
default_timeout_seconds = 8
max_timeout_seconds = 20
max_output_bytes = "64KB"
max_code_bytes = "32KB"
pass_parent_env = false
env_allowlist = ["PATH", "LANG", "LC_ALL", "PYTHONUTF8"]

# RLIMIT sandbox parameters.
[tools.python_exec.rlimit]
enabled = false
cpu_seconds = 2
memory_mb = 256
fsize_mb = 16
nproc = 64
nofile = 256

# Cgroup sandbox parameters.
[tools.python_exec.cgroup]
enabled = false
driver = "systemd"
cpu_quota_percent = 100
memory_max_mb = 256

# External jail wrapper settings.
[tools.python_exec.jail]
enabled = false
command_prefix = []

# Structured logging output.
[logging]
structured = true
logfmt_enabled = true
# Production note: set to "INFO" to reduce verbosity.
log_level = "DEBUG"
kv_separator = "="
record_separator = " "
